import{r as a,j as d}from"./index-C2hCYKUS.js";import{V as D,R as I,P as W,u as P,D as h,M as $,a as z,C as V}from"./react-three-fiber.esm-Bna3oQNJ.js";function m(){return m=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)({}).hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},m.apply(null,arguments)}function v(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function E(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),e.push.apply(e,n)}return e}function j(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?E(Object(e),!0).forEach(function(n){v(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):E(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}new D;new D;function U(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var l=function t(r,e,n){var o=this;U(this,t),v(this,"dot2",function(s,u){return o.x*s+o.y*u}),v(this,"dot3",function(s,u,i){return o.x*s+o.y*u+o.z*i}),this.x=r,this.y=e,this.z=n},k=[new l(1,1,0),new l(-1,1,0),new l(1,-1,0),new l(-1,-1,0),new l(1,0,1),new l(-1,0,1),new l(1,0,-1),new l(-1,0,-1),new l(0,1,1),new l(0,-1,1),new l(0,1,-1),new l(0,-1,-1)],A=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],M=new Array(512),S=new Array(512),q=function(r){r>0&&r<1&&(r*=65536),r=Math.floor(r),r<256&&(r|=r<<8);for(var e=0;e<256;e++){var n;e&1?n=A[e]^r&255:n=A[e]^r>>8&255,M[e]=M[e+256]=n,S[e]=S[e+256]=k[n%12]}};q(0);function B(t){if(typeof t=="number")t=Math.abs(t);else if(typeof t=="string"){var r=t;t=0;for(var e=0;e<r.length;e++)t=(t+(e+1)*(r.charCodeAt(e)%96))%2147483647}return t===0&&(t=311),t}function R(t){var r=B(t);return function(){var e=r*48271%2147483647;return r=e,e/2147483647}}var N=function t(r){var e=this;U(this,t),v(this,"seed",0),v(this,"init",function(n){e.seed=n,e.value=R(n)}),v(this,"value",R(this.seed)),this.init(r)},H=new N(Math.random()),L={radius:1,center:[0,0,0]};function K(t,r){for(var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:H,n=j(j({},L),r),o=n.radius,s=n.center,u=0;u<t.length;u+=3){var i=Math.pow(e.value(),.3333333333333333),c=e.value()*2-1,f=e.value()*2-1,p=e.value()*2-1,b=Math.sqrt(c*c+f*f+p*p);c=i*c/b,f=i*f/b,p=i*p/b,t[u]=c*o+s[0],t[u+1]=f*o+s[1],t[u+2]=p*o+s[2]}return t}const T=()=>parseInt(I.replace(/\D+/g,"")),F=T(),x=F>=154?"opaque_fragment":"output_fragment";class J extends W{constructor(r){super(r),this.onBeforeCompile=(e,n)=>{const{isWebGL2:o}=n.capabilities;e.fragmentShader=e.fragmentShader.replace(`#include <${x}>`,`
        ${o?`#include <${x}>`:`#extension GL_OES_standard_derivatives : enable
#include <${x}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${F>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const Q=a.forwardRef((t,r)=>{const[e]=a.useState(()=>new J(null));return a.createElement("primitive",m({},t,{object:e,ref:r,attach:"material"}))});let g,w;const X=a.createContext(null),C=new $,_=new z,Y=a.forwardRef(({children:t,range:r,limit:e=1e3,...n},o)=>{const s=a.useRef(null);a.useImperativeHandle(o,()=>s.current,[]);const[u,i]=a.useState([]),[[c,f,p]]=a.useState(()=>[new Float32Array(e*3),Float32Array.from({length:e*3},()=>1),Float32Array.from({length:e},()=>1)]);a.useEffect(()=>{s.current.geometry.attributes.position.needsUpdate=!0}),P(()=>{for(s.current.updateMatrix(),s.current.updateMatrixWorld(),C.copy(s.current.matrixWorld).invert(),s.current.geometry.drawRange.count=Math.min(e,r!==void 0?r:e,u.length),g=0;g<u.length;g++)w=u[g].current,w.getWorldPosition(_).applyMatrix4(C),_.toArray(c,g*3),s.current.geometry.attributes.position.needsUpdate=!0,w.matrixWorldNeedsUpdate=!0,w.color.toArray(f,g*3),s.current.geometry.attributes.color.needsUpdate=!0,p.set([w.size],g),s.current.geometry.attributes.size.needsUpdate=!0});const b=a.useMemo(()=>({getParent:()=>s,subscribe:O=>(i(y=>[...y,O]),()=>i(y=>y.filter(G=>G.current!==O.current)))}),[]);return a.createElement("points",m({userData:{instances:u},matrixAutoUpdate:!1,ref:s,raycast:()=>null},n),a.createElement("bufferGeometry",null,a.createElement("bufferAttribute",{attach:"attributes-position",args:[c,3],usage:h}),a.createElement("bufferAttribute",{attach:"attributes-color",args:[f,3],usage:h}),a.createElement("bufferAttribute",{attach:"attributes-size",args:[p,1],usage:h})),a.createElement(X.Provider,{value:b},t))}),Z=a.forwardRef(({children:t,positions:r,colors:e,sizes:n,stride:o=3,...s},u)=>{const i=a.useRef(null);return a.useImperativeHandle(u,()=>i.current,[]),P(()=>{const c=i.current.geometry.attributes;c.position.needsUpdate=!0,e&&(c.color.needsUpdate=!0),n&&(c.size.needsUpdate=!0)}),a.createElement("points",m({ref:i},s),a.createElement("bufferGeometry",null,a.createElement("bufferAttribute",{attach:"attributes-position",args:[r,o],usage:h}),e&&a.createElement("bufferAttribute",{attach:"attributes-color",args:[e,o],count:e.length/o,usage:h}),n&&a.createElement("bufferAttribute",{attach:"attributes-size",args:[n,1],count:n.length/o,usage:h})),t)}),ee=a.forwardRef((t,r)=>t.positions instanceof Float32Array?a.createElement(Z,m({},t,{ref:r})):a.createElement(Y,m({},t,{ref:r})));function te(t){const r=a.useRef(),[e]=a.useState(()=>K(new Float32Array(5e3),{radius:1.5}));return P((n,o)=>{r.current.rotation.x-=o/10,r.current.rotation.y-=o/15}),d.jsx("group",{rotation:[0,0,Math.PI/4],children:d.jsx(ee,{ref:r,positions:e,stride:3,frustumCulled:!1,...t,children:d.jsx(Q,{transparent:!0,color:"#a855f7",size:.002,sizeAttenuation:!0,depthWrite:!1,opacity:.5})})})}function ae(){return d.jsx("div",{className:"fixed inset-0 z-[-1] bg-black",children:d.jsx(V,{camera:{position:[0,0,1]},children:d.jsx(te,{})})})}export{ae as default};
